<div class="whatsapp-search-member-layout">
  <!-- Sidebar -->
  <app-sidebar></app-sidebar>

  <!-- Main Content -->
  <div class="main-content">
    <div class="search-member-page">
      <div class="page-header">
        <div class="breadcrumb">
          <span>Dashboard</span>
          <span class="breadcrumb-sep">•</span>
          <span>Whatsapp Member</span>
          <span class="breadcrumb-sep">•</span>
          <span class="breadcrumb-current">Search</span>
        </div>
        <h1>Search member details</h1>
      </div>
<!-- SEARCH -->
<div class="search-bar">
  <input
    type="text"
    placeholder="Search by member name, number or group…"
    [(ngModel)]="searchTerm"
    (input)="onSearch()"     
  />
</div>
  <div class="loading-spinner" *ngIf="isLoading">
        <div class="spinner"></div>
        <span>Loading Members...</span>
      </div>
<!-- TABLE -->
<div class="export-btn-container" *ngIf="!isLoading && filteredMembers.length > 0">
  <button mat-raised-button color="primary" (click)="exportToExcel()">
    Download
  </button>
</div>

<div class="table-container" *ngIf="!isLoading">
  <table class="members-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Member Name</th>
        <th>Number</th>
        <th>Group</th>
        <th>Created By</th>
        <th>Status</th>
        <th>Created At</th>
        <!-- <th>Action</th> -->
      </tr>
    </thead>

    <tbody>
      <!-- ✅ use the paginated slice -->
      <tr *ngFor="let m of paginatedMembers">
        <td><span class="id-badge">#{{ m.member_id }}</span></td>
        <td>{{ m.member_name }}</td>
        <td>{{ m.member_number }}</td>
        <td>{{ m.group_name }}</td>
        <td>{{ m.created_by }}</td>
        <td>
          <span class="status-badge" [class.active]="m.status === 'ACTIVE'">
            {{ m.status }}
          </span>
        </td>
        <td>{{ formatDate(m.created_at) }}</td>
   
      </tr>

      <!-- show only when filtered list is empty -->
      <tr *ngIf="filteredMembers.length === 0">
        <td colspan="7" class="no-data">No members found</td>
      </tr>
    </tbody>
  </table>

  <!-- PAGINATION (unchanged markup) -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
      ‹ Prev
    </button>

    <button
      *ngFor="let pg of [].constructor(totalPages); let i = index"
      (click)="changePage(i + 1)"
      [class.active]="currentPage === i + 1"
    >
      {{ i + 1 }}
    </button>

    <button
      (click)="changePage(currentPage + 1)"
      [disabled]="currentPage === totalPages"
    >
      Next ›
    </button>
  </div>
</div>

  
    </div>
  </div>
</div>
